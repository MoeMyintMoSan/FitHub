CREATE TABLE Private_Feed (
    athlete_id INT NOT NULL,
    professional_id INT NOT NULL,
    post_id INT NOT NULL UNIQUE,
    PRIMARY KEY (athlete_id, professional_id, post_id),
    FOREIGN KEY (athlete_id) REFERENCES Athlete(athlete_id) ON DELETE CASCADE,
    FOREIGN KEY (professional_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (post_id) REFERENCES Post(post_id) ON DELETE CASCADE
);

-- Register Table (updated with ON DELETE CASCADE)
CREATE TABLE Register (
    athlete_id INT NOT NULL,
    professional_id INT NOT NULL,
    PRIMARY KEY (athlete_id, professional_id),
    FOREIGN KEY (athlete_id) REFERENCES Athlete(athlete_id) ON DELETE CASCADE,
    FOREIGN KEY (professional_id) REFERENCES users(user_id) ON DELETE CASCADE
);

CREATE TABLE like_post (
    like_post_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    post_id INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (post_id) REFERENCES Post(post_id) ON DELETE CASCADE
);

CREATE TABLE "Comment" (
    comment_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    post_id INT NOT NULL,
    content TEXT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
    FOREIGN KEY (post_id) REFERENCES Post(post_id) ON DELETE CASCADE
);  

CREATE TABLE "post" (
    post_id SERIAL PRIMARY KEY,
    professional_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    content TEXT,
    image VARCHAR(255),
    content_type VARCHAR(20) CHECK (content_type IN ('Trainer', 'Nutritionist')) NOT NULL,
    post_visibility VARCHAR(20) CHECK (post_visibility IN ('Public', 'Private')) NOT NULL,
    created_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (professional_id) REFERENCES Professional(professional_id) ON DELETE CASCADE
);